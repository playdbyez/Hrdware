############[] Dynamic Random Access Memory []###########

[] A DRAM chip is made up of several cells organised in rows and columns
[] DRAM chips usualy consist of 10⁹ cells
[] DRAM's transfer rate is 64 bits (8bytes)
[] Synchronous DRAM works relative to a clock frequency
[] Said clock frequency determines the speed of the parallel data bus attached to it

[] DQ pins specify the number of bits processed by the CPU at once in "words"
[] Word sizes range from 4 to 80 bits 
[] DRAM implements 64 bit words (8bytes)
[] DRAM allows the MMU to dictate how much data to transfer (2, 4, 8 words)

[] An address of 2ᴺ select lines is multiplexed into an address of N address lines
[] DRAM demultiplexes N address lines and selects the equivalent memory cell

[] Fully duplex parallel bus is expensive
[] Asynchronous DRAM is no longer relevant

[] Dual In-line Memory Model (DIMM)
  - Multiple DIMM can be used on a single bus channel
  - The I/O buffer is a component of the DIMM and it holds bits per Data Line



## Operations Overview ##
> Programs selects memory location
> Operating System translates memory location into a virtual address
> MMU translates it into Physical Address via its hardware specific Page tables
> MMU transmists via Address Bus
> RAM chip corresponding to said address is selected
> RAM transmits back via data bus


 
>> First RAS multiplexes its address and transmits it back to CPU
>> Subsequently CAS multiplexes its address and transmits it back to CPU



##################### [] SDR DRAM GATE CONNECTORS [] #######################
[] A DRAM's parameters are to be ploted within a Connectors Activity graph, mapped against clock as a measure of time.
[] A single clock cycle is comprised to two horizontal lines and two vertical lines
[] Within a clock cycle, signals are issued on the rising line of the clock (middle vertical line)


####################################### :: Parameters :: #######################################

CLK = Clock
[] Time measurement for the occurence of the signals


WE   = Write Enable
[] Allows the current to flow through a row of cells


tᵣₚ  = Row Precharge Time 
[] Used to indicate how many cycles it takes to select a new RAS signal after a previous RAS has been issued
[] Issued only at the end of the CL cycles
[] Can only be re-issued again after t(RAS) cycles


RAS  = Row Address Selection
[] Selects a row of cells based of the demultiplexed address
[] tᵣₚ cycles always preceed an RAS signal


tᵣ꜀ₔ = RAS-to-CAS delay
[] A delays that must occurr after an RAS signal and a CAS signal


CAS  = Column Address Selection
[] Selects columns of cells within a row
[] RAS signal always preceeds CAS signals


CL   = CAS Latency
[] A delay that must occur after all CAS signals have been issed for a particular row
[] CL always preceeds the DQ output

DQ = Output pins
[] Used for transmiting data input when overwriting cells within the array or data output when reading cells back to the MMU

tᵣₐₛ = Active to Precharge delay
[] Fixed value that dictates the minimum mmount of cycles that must exist inbetween tᵣₚ signals 


Tx   = Command Rate
[] Used for controlling the frequency of  CAS signals
[] Tx is a standard, not a signal to be plotted within the grap
[] x can be either a 1 or a 2 (T1/ T2)
[] T1 = high-performance Dram module
[] T2 = 




##########################################################################################################

################# MEMORY OPERATIONS #################

[] After considering t(RAS) for the module, the MMU specifies if the row will be latched for longer depending on how many columns will be fetched within it.
[] t(RP) signal is issue vie WE and RAS being raised simultaneously
[] RAS signal waits for the completion of t(RP) cycles
[] At the end of t(RP), RAS signal is issued and the row is latched
[] CAS signal waits for t(RCD) cycles before fetching one or more columns
[] At the end of CAS, DQ pins must wait for CL cycles
[] DQ issues out a word and a new t(RP) signal may be issued simultaneously, but only if t(RAS) cycles have passed

<+> Ideally several CAS signals should be issued on the same RAS
<+> Ideally t(RP) cycles should take as long as the data being sent out by DQ in order to prevent any stall cycles on the next RAS
<+> Hardware and software prefetching can be used to reduce stalls




[[[[ GRAPH ]]]




https://www.techtarget.com/searchstorage/definition/RAM-random-access-memory
https://www.youtube.com/watch?v=HdqQqefo2lU&t=701s&pp=ygUQcmFtIG11bHRpcGxleGluZw%3D%3D
https://www.youtube.com/watch?v=7J7X7aZvMXQ&pp=ygUOaG93IGRyYW0gd29ya3M%3D
https://www.youtube.com/watch?v=I-9XWtdW_Co
https://www.youtube.com/watch?v=PVad0c2cljo&t=199s&pp=ygUOaG93IGRyYW0gd29ya3M%3D


############ PERFORMANCE METRICS ##############

[] DDR Notation []
DRAM uses a special notation to determine the performance of its module based on the graph above

NOTATION
w-x-y-z-T

w   CL
x   t(rcd)
y   t(rp)
z   t(RAS)
T   T1 or T2

[] The BIOS sets the dafault values for the memory signals bellow within  programmable registers placed inside a RAM module.
   BIOS may also allow changing some or all of these values depending on the quality of the RAM
   WARNING: Changing these parameters  may affect the stability of the system

[] The sum pf the ammount of cycles of t(rp), CL and t(RCD) should be bigger or qualto the value for t(RAS) in order to preven a stall of the next t(RP) 
   (t(RP)+t(RCD)+CL >= t(RAS))

[] The lower the CL the faster the module
[] Faster buses are superior to faster CL






###############################

[] Clock ratio []
Considers the combination of CPU and memory ctonroller frequnecy in order to determine
how many CPU cycles are stalled per stall cycles occuring in memory

> Quad-pumped intel Core2 Processor (freq. 2.933GHz)
> FSB/MMU bus (freq. 1.066GHz)
>> Clock Ratio of 11:1 (11 CPU stalls occur per one memory stall)

#################################################################

 [] Burst speed [] 
Maxmum transfer rate of memory via data bus

FORMULA
Bus freq(MHz)  x  RAM freq(Bytes) = BURST (GB/s)

EXAMPLE
> quad-pumped 200MHZ bus
> 8byte RAM freq

Since this RAM module is capable of filling a bandwith of 8 bytes worth of data transfer
(200 * 4) * 8
800 * 8 = 6400

> 6.4 GB/s Burst Speed



 [] Current DQ frequency [] 
Distance from one DQ signal before t(RP) to nother DQ signal in cycles

FORMULA 
2 DQ signals / (cycles distance/100) = Current DQ freq


EXAMPLE
> DQ signal 1 issued at cycle[2]
> DQ signal 2 issued at cycle[9]
  >> Distance of 7 cycles

Since DQ was in use in 2 out of 7 cycles
2/0.07 = 28.5714

> Current frequence of usage is 28.5% out of the total bandwith available


 [] Bus Usage []
How often the data bus is being currently used

FORMULA 
Curr DQ x Burst Speed = Bus Usage (GB/s)


EXAMPLE
28.5714 * 6400 = 182856.96

>> The current bus usage of the data bus by the memory is of 1.8 GB/s
>>> This is deemed unoptimal compared with maximum it could be, determined by the burst speed
>>>>> Thus the current bus usage is 72% less than the maximum available

###############################################################################

> von Neumann architecture of personal computers


> A system without a dedicated Video RAM with two parts, will end up using parts of regular RAM to feed the display
>> A display of 1024 x 768 with 16bpp at 60Hz will run at a freuquency of 94MB/s when feeding off non-dedicated RAM















######## :: Single Data Rate Dynamic Random Access Memory (DDR DRAM):: #########

[] Has only one parallel data bus connected to each array of cells (single-pumped)
[] Transmits one word per clock cycle


array         bus freq.     name rate p/
freq.         p/channel     full channel model

100Mhz        100MHz         PC100




######## :: Double Data Rate Dynamic Random Access Memory (DDR DRAM):: #########

[] Double Data Rate DRAM is the successor to Single data Rate DRAM and it innovates by increasing the throughput.
   DDR modules managed to increase the output of each array of cells without increasing the frequency of which the cells are retrieved.
   This was done by increasing the bus frequency but not the frequency of the array, thereby reducing the transfer time of DQ pins without affecting the latency
   This reduction of the transfer time of the DQ pins is then made possible because an I/O buffer component was added to each array's Data Line.
   An I/O buffer is designed to hold two bits per data line current that flows per clock cycle

[] Each channel supports two parallel data buses (double-pumped)
[] Each array of cells is attached to two Data Line buses 
[] Its cell array operates at half the frequency of its external data bus
[] DQ pins can transmit on the rising and falling vertical lines of the clock 
[] Word size of 64 bits per word and a transfer rate of two words per clock cycle 
[] I/O buffer capacity of 2 bits
[] A DDR memory controller supports 480 pins total, divided between 2 channels with 240 pins per channel



######## :: Double Data Rate 2 (DDR2 DRAM):: #########
[] DDR2 inovates from DDR1 by optimising the bus frequency and increasing the ammount of Data Lines
[] DDR2 specification allows a maximum of 2 modules per channel and since a DDR memory controller only support 2 channels, a maxmimum of 4 DDR2 modules can be connected to each memory controller/MMU
[] Each channel supports four parallel data buses (quad-pumped)
[] Each array then supports 4 Data line buses
[] 240 DQ pins
[] Runs at 1.8V on a quad-pumped bus
[] I/O buffer capacity of 4 bits


######## :: Double Data Rate 3 (DDR3 DRAM):: #########
[] Higher CL than DDR2
[] Half the Dynamic Capacity of DDR2
[] Its cell aray operates at a frequency of a quarter of its external bus
[] Only useful if it operates at a higher frequency than DDR2 since it prioritizes bandwith output over latency
[] Runs at 1.5V normally
[] Running at 1.3V it has equal latency to DDR2
[] Die smaller than DDR2
[] I/O buffer capacity of 8 bits



